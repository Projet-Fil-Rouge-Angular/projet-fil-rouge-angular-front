<form (ngSubmit)="onSubmit()" class="course-form">
  <label for="name">Nom du cours :</label>
  <input type="text" id="name" [(ngModel)]="formData.name" name="name" required/>
  <div *ngIf="!formData.name" class="error-message">
    Le nom du cours est requis.
  </div>

  <label for="description">Description :</label>
  <textarea id="description" [(ngModel)]="formData.description" name="description" rows="3" required></textarea>
  <div *ngIf="!formData.description" class="error-message">
    La description est requise.
  </div>

  <label for="duration">Durée :</label>
  <div class="duration-group">
    <input type="number" id="duration" [(ngModel)]="formData.duration" name="duration" required min="1"/>
    <select [(ngModel)]="formData.durationUnit" name="durationUnit" class="duration-select" required >
      <option value="heures">heures</option>
      <option value="jours">jours</option>
    </select>
  </div>
  <div *ngIf="!formData.duration || formData.duration < 1" class="error-message" >
    La durée doit être supérieure ou égale à 1.
  </div>

  <label for="contentMarkdown">Contenu (Markdown) :</label>
  <textarea id="contentMarkdown" [(ngModel)]="formData.contentMarkdown" name="contentMarkdown" rows="5" required></textarea>
  <div *ngIf="!formData.contentMarkdown" class="error-message">
    Le contenu est requis.
  </div>

  <label for="imageUrl">URL de l'image :</label>
  <input type="url" id="imageUrl" [(ngModel)]="formData.imageUrl" name="imageUrl" required/>
  <div *ngIf="!formData.imageUrl" class="error-message">
    Une URL d'image valide est requise.
  </div>

  <label for="level">Niveau :</label>
  <select [(ngModel)]="formData.level" name="level" id="level" required>
    <option value="" disabled selected>Choisissez un niveau</option>
    <option value="Débutant">Débutant</option>
    <option value="Intermédiaire">Intermédiaire</option>
    <option value="Avancé">Avancé</option>
  </select>
  <div *ngIf="!formData.level" class="error-message">Le niveau est requis.</div>

  <label for="prerequisites">Prérequis :</label>
  <div class="input-group">
    <input type="text" id="prerequisites" [(ngModel)]="prerequisiteInput" name="prerequisiteInput" placeholder="Ajouter un prérequis"/>
    <button type="button" (click)="addPrerequisite()" style="margin-top: 5px">
      Ajouter
    </button>
  </div>
  <ul class="chip-list">
    <li *ngFor="let prerequisite of formData.prerequisites; let i = index">
      {{ prerequisite }}
      <button type="button" (click)="removePrerequisite(i)">×</button>
    </li>
  </ul>
  <div *ngIf="formData.prerequisites.length === 0" class="error-message">
    Au moins un prérequis est requis.
  </div>

  <label for="tags">Tags :</label>
  <div class="input-group">
    <input type="text" id="tags" [(ngModel)]="tagInput" name="tagInput" placeholder="Ajouter un tag"/>
    <button type="button" (click)="addTag()" style="margin-top: 5px">
      Ajouter
    </button>
  </div>
  <ul class="chip-list">
    <li *ngFor="let tag of formData.tags; let i = index">
      {{ tag }}
      <button type="button" (click)="removeTag(i)">×</button>
    </li>
  </ul>
  <div *ngIf="formData.tags.length === 0" class="error-message">
    Au moins un tag est requis.
  </div>

  <div class="form-actions">
    <button type="submit" [disabled]="!isFormValid()">Enregistrer</button>
    <button type="button" (click)="cancel.emit()">Annuler</button>
  </div>
</form>
